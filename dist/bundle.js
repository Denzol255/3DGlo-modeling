(()=>{"use strict";var e,t,o,n,c,r,a,l,i,s,u,d,m,v,f,p,h;m=document.querySelector("#timer-hours"),v=document.querySelector("#timer-minutes"),f=document.querySelector("#timer-seconds"),p=function(e){return e<10?"0"+e:e},h=setInterval((function(){var e,t,o,n=(e=(new Date("12 march 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t});n.timeRemaining>0?(m.textContent=p(n.hours),v.textContent=p(n.minutes),f.textContent=p(n.seconds),document.querySelector(".timer-numbers").classList.remove("d-none")):(clearInterval(h),f.textContent="00",v.textContent="00",m.textContent="00",document.querySelector(".timer-numbers").classList.remove("d-none"))}),1e3),s=document.querySelector(".menu"),u=document.querySelector("menu"),d=function(){return u.classList.toggle("active-menu")},s.addEventListener("click",(function(e){e.stopPropagation(),d()})),document.addEventListener("click",(function(e){var t=e.target,o=t===u||u.contains(t),n=t===s,c=u.classList.contains("active-menu");o||n||!c||d(),(t=t.matches("menu a"))&&d()})),a=document.querySelectorAll(".popup-btn"),l=document.querySelector(".popup"),i=l.querySelector(".popup-content"),a.forEach((function(e){e.addEventListener("click",(function(){var e,t,o,n,c;window.innerWidth>768?(l.style.display="block",t=(e={duration:1e3,timing:function(e){return Math.pow(e,3)},draw:function(e){i.style.left=e*(document.documentElement.clientWidth/2-i.offsetWidth/2+50)+"px"}}).timing,o=e.draw,n=e.duration,c=performance.now(),requestAnimationFrame((function e(r){var a=(r-c)/n;a>1&&(a=1);var l=t(a);o(l),a<1&&requestAnimationFrame(e)})),document.querySelector("body").classList.add("scroll--lock")):(l.style.display="block",document.querySelector("body").classList.add("scroll--lock"))}))})),l.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?(l.style.display="none",document.querySelector("body").classList.remove("scroll--lock")):(t=t.closest(".popup-content"))||(l.style.display="none",document.querySelector("body").classList.remove("scroll--lock"))})),n=document.querySelector(".service-header"),c=n.querySelectorAll(".service-header-tab"),r=document.querySelectorAll(".service-tab"),n.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&c.forEach((function(e,o){e===t&&function(e){for(var t=0;t<r.length;t++)e===t?(c[t].classList.add("active"),r[t].classList.remove("d-none")):(c[t].classList.remove("active"),r[t].classList.add("d-none"))}(o)}))})),function(){for(var e,t,o=document.querySelector(".portfolio-content"),n=document.querySelectorAll(".portfolio-item"),c=(document.querySelectorAll(".portfolio-btn"),0),r=0;r<n.length;r++)(t=document.createElement("li")).classList.add("dot"),0===r&&t.classList.add("dot-active"),document.querySelector(".portfolio-dots").append(t);var a=document.querySelectorAll(".dot"),l=function(e,t,o){e[t].classList.add(o)},i=function(e,t,o){e[t].classList.remove(o)},s=function(){i(n,c,"portfolio-item-active"),i(a,c,"dot-active"),++c>=n.length&&(c=0),l(n,c,"portfolio-item-active"),l(a,c,"dot-active")},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;e=setInterval(s,t)};o.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(i(n,c,"portfolio-item-active"),i(a,c,"dot-active"),t.matches("#arrow-right")?c++:t.matches("#arrow-left")?c--:t.matches(".dot")&&a.forEach((function(e,o){e===t&&(c=o)})),c>=n.length&&(c=0),c<0&&(c=n.length-1),l(n,c,"portfolio-item-active"),l(a,c,"dot-active"))})),o.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(e)})),o.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&u()})),u(2e3)}(),document.querySelectorAll(".command__photo").forEach((function(e){var t;e.addEventListener("mouseenter",(function(e){t=e.target.src,e.target.src=e.target.dataset.img})),e.addEventListener("mouseleave",(function(e){e.target.src=t}))})),o=function(e,t){e.value=e.value.replace(t,"").trim(),function(e){e.value=e.value.replace(/-+/g,"-"),e.value=e.value.replace(/\s+/g," "),e.value=e.value.replace(/^-+/g,""),e.value=e.value.replace(/-+$/g,"")}(e)},document.querySelector("body").addEventListener("blur",(function(e){var t=e.target;if(t.matches("[name = 'user_name']")){o(t,/[^-а-яё\s]/gi);for(var n=t.value.split(" "),c=0;c<n.length;c++)n[c]=n[c].slice(0,1).toUpperCase()+n[c].slice(1).toLowerCase();n=n.join(" "),t.value=n}else t.matches("[name = 'user_message']")?o(t,/[^а-яё\s\d.,;:'"!?()-/]/gi):t.matches("[name = 'user_email']")?o(t,/[^a-z@_.!~*'-]/gi):t.matches("[name = 'user_phone']")?o(t,/[^\d+]/gi):t.matches(".calc-item")&&(t.value=t.value.replace(/\D/g,""))}),!0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),c=document.querySelector(".calc-count"),r=document.querySelector(".calc-day"),a=document.getElementById("total"),l=function(){var t=0,l=1,i=1,s=o.options[o.selectedIndex].value,u=+n.value;c.value>1&&(l+=(c.value-1)/10),r.value&&r.value<5?i*=2:r.value&&r.value<10&&(i*=1.5),s&&u&&(t=e*s*u*l*i),a.textContent=t};t.addEventListener("input",(function(e){var t=e.target;(t.matches(".calc-type")||t.matches(".calc-square")||t.matches(".calc-count")||t.matches(".calc-day"))&&l()}))}(),e=document.createElement("div"),t=function(e,t,o,n,c){var r=!0;return document.querySelectorAll("[name = ".concat(t,"]")).forEach((function(t){t.id.split("-")[0]===e.id&&(o.test(t.value)?r=!0:(e.appendChild(n),n.style.cssText="font-size: 20px; color: red",n.textContent=c,r=!1))})),!!r},document.addEventListener("submit",(function(o){var n=o.target;if(n.matches("form")){o.preventDefault();var c=t(n,"user_phone",/\+?\d{7,13}/g,e,"Полe phone может начинаться с '+' и должно содержать от 7 до 13 символов"),r=t(n,"user_email",/[^]/,e,"Полe email не должно быть пустым"),a=t(n,"user_name",/.{2,}/g,e,"Полe name должно содержать минимум 2 символа");if(c&&r&&a){e.style.cssText="font-size: 20px; color: white",n.appendChild(e);var l=new FormData(n);e.textContent="Загрузка...";var i={};l.forEach((function(e,t){i[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"aplication/json"},body:JSON.stringify(e)})}(i).then((function(t){if(200!==t.status)throw new Error("status network is not 200");e.textContent="Спасибо, наш менеджер с вами скоро свяжется!",setTimeout((function(){e.remove()}),2e3),setTimeout((function(){document.querySelector(".popup").style.display="none",document.querySelector("body").classList.remove("scroll--lock")}),3e3),n.reset()})).catch((function(t){e.textContent="Что-то пошло не так",console.error(t)}))}}}))})();