(()=>{"use strict";(e=>{const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds"),n=function(e){return e<10?"0"+e:e},r=setInterval((()=>{const e=function(){const e=(new Date("12 march 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t}}();e.timeRemaining>0?(t.textContent=n(e.hours),o.textContent=n(e.minutes),c.textContent=n(e.seconds),document.querySelector(".timer-numbers").classList.remove("d-none")):(clearInterval(r),c.textContent="00",o.textContent="00",t.textContent="00",document.querySelector(".timer-numbers").classList.remove("d-none"))}),1e3)})(),(()=>{const e=document.querySelector(".menu"),t=document.querySelector("menu"),o=()=>t.classList.toggle("active-menu");e.addEventListener("click",(e=>{e.stopPropagation(),o()})),document.addEventListener("click",(c=>{let n=c.target;const r=n===t||t.contains(n),s=n===e,a=t.classList.contains("active-menu");r||s||!a||o(),n=n.matches("menu a"),n&&o()}))})(),(()=>{const e=document.querySelectorAll(".popup-btn"),t=document.querySelector(".popup"),o=t.querySelector(".popup-content");e.forEach((e=>{e.addEventListener("click",(()=>{window.innerWidth>768?(t.style.display="block",function({timing:e,draw:t,duration:o}){const c=performance.now();requestAnimationFrame((function n(r){let s=(r-c)/o;s>1&&(s=1);const a=e(s);t(a),s<1&&requestAnimationFrame(n)}))}({duration:1e3,timing:e=>Math.pow(e,3),draw(e){o.style.left=e*(document.documentElement.clientWidth/2-o.offsetWidth/2+50)+"px"}}),document.querySelector("body").classList.add("scroll--lock")):(t.style.display="block",document.querySelector("body").classList.add("scroll--lock"))}))})),t.addEventListener("click",(e=>{let o=e.target;o.classList.contains("popup-close")?(t.style.display="none",document.querySelector("body").classList.remove("scroll--lock")):(o=o.closest(".popup-content"),o||(t.style.display="none",document.querySelector("body").classList.remove("scroll--lock")))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let c=e.target;c=c.closest(".service-header-tab"),c&&t.forEach(((e,n)=>{e===c&&(e=>{for(let c=0;c<o.length;c++)e===c?(t[c].classList.add("active"),o[c].classList.remove("d-none")):(t[c].classList.remove("active"),o[c].classList.add("d-none"))})(n)}))}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item");document.querySelectorAll(".portfolio-btn");let o,c,n=0;for(let e=0;e<t.length;e++)c=document.createElement("li"),c.classList.add("dot"),0===e&&c.classList.add("dot-active"),document.querySelector(".portfolio-dots").append(c);const r=document.querySelectorAll(".dot"),s=(e,t,o)=>{e[t].classList.add(o)},a=(e,t,o)=>{e[t].classList.remove(o)},l=()=>{a(t,n,"portfolio-item-active"),a(r,n,"dot-active"),n++,n>=t.length&&(n=0),s(t,n,"portfolio-item-active"),s(r,n,"dot-active")},i=(e=2e3)=>{o=setInterval(l,e)};e.addEventListener("click",(e=>{e.preventDefault();const o=e.target;o.matches(".portfolio-btn, .dot")&&(a(t,n,"portfolio-item-active"),a(r,n,"dot-active"),o.matches("#arrow-right")?n++:o.matches("#arrow-left")?n--:o.matches(".dot")&&r.forEach(((e,t)=>{e===o&&(n=t)})),n>=t.length&&(n=0),n<0&&(n=t.length-1),s(t,n,"portfolio-item-active"),s(r,n,"dot-active"))})),e.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),e.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(2e3)})(),document.querySelectorAll(".command__photo").forEach((e=>{let t;e.addEventListener("mouseenter",(e=>{t=e.target.src,e.target.src=e.target.dataset.img})),e.addEventListener("mouseleave",(e=>{e.target.src=t}))})),(()=>{const e=(e,t)=>{e.value=e.value.replace(t,"").trim(),(e=>{e.value=e.value.replace(/-+/g,"-"),e.value=e.value.replace(/\s+/g," "),e.value=e.value.replace(/^-+/g,""),e.value=e.value.replace(/-+$/g,"")})(e)};document.querySelector("body").addEventListener("blur",(t=>{const o=t.target;if(o.matches("[name = 'user_name']")){e(o,/[^-а-яё\s]/gi);let t=o.value.split(" ");for(let e=0;e<t.length;e++)t[e]=t[e].slice(0,1).toUpperCase()+t[e].slice(1).toLowerCase();t=t.join(" "),o.value=t}else o.matches("[name = 'user_message']")?e(o,/[^а-яё\s\d.,;:'"!?()-/]/gi):o.matches("[name = 'user_email']")?e(o,/[^a-z@_.!~*'-]/gi):o.matches("[name = 'user_phone']")?e(o,/[^\d+]/gi):o.matches(".calc-item")&&(o.value=o.value.replace(/\D/g,""))}),!0)})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),c=document.querySelector(".calc-square"),n=document.querySelector(".calc-count"),r=document.querySelector(".calc-day"),s=document.getElementById("total");t.addEventListener("input",(t=>{const a=t.target;(a.matches(".calc-type")||a.matches(".calc-square")||a.matches(".calc-count")||a.matches(".calc-day"))&&(()=>{let t=0,a=1,l=1;const i=o.options[o.selectedIndex].value,u=+c.value;n.value>1&&(a+=(n.value-1)/10),r.value&&r.value<5?l*=2:r.value&&r.value<10&&(l*=1.5),i&&u&&(t=e*i*u*a*l),s.textContent=t})()}))})(),(()=>{const e=document.createElement("div"),t=(e,t,o,c,n)=>{let r=!0;return document.querySelectorAll(`[name = ${t}]`).forEach((t=>{t.id.split("-")[0]===e.id&&(o.test(t.value)?r=!0:(e.appendChild(c),c.style.cssText="font-size: 20px; color: red",c.textContent=n,r=!1))})),!!r};document.addEventListener("submit",(o=>{const c=o.target;if(c.matches("form")){o.preventDefault();const n=t(c,"user_phone",/\+?\d{7,13}/g,e,"Полe phone может начинаться с '+' и должно содержать от 7 до 13 символов"),r=t(c,"user_email",/[^]/,e,"Полe email не должно быть пустым"),s=t(c,"user_name",/.{2,}/g,e,"Полe name должно содержать минимум 2 символа");if(n&&r&&s){e.style.cssText="font-size: 20px; color: white",c.appendChild(e);const t=new FormData(c);e.textContent="Загрузка...";const o={};t.forEach(((e,t)=>{o[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"aplication/json"},body:JSON.stringify(e)}))(o).then((t=>{if(200!==t.status)throw new Error("status network is not 200");e.textContent="Спасибо, наш менеджер с вами скоро свяжется!",setTimeout((()=>{e.remove()}),2e3),setTimeout((()=>{document.querySelector(".popup").style.display="none",document.querySelector("body").classList.remove("scroll--lock")}),3e3),c.reset()})).catch((t=>{e.textContent="Что-то пошло не так",console.error(t)}))}}}))})()})();