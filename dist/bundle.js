(()=>{"use strict";var e,t,n,o,c,r,a,i,l,s,u,d;(function(e){var t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function c(e){return e<10?"0"+e:e}var r=setInterval((function(){var e,a,i,l=(e=(new Date("9 november 2021").getTime()-(new Date).getTime())/1e3,a=Math.floor(e%60),i=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60),minutes:i,seconds:a});l.timeRemaining>0?(t.textContent=c(l.hours),n.textContent=c(l.minutes),o.textContent=c(l.seconds),document.querySelector(".timer-numbers").classList.remove("d-none")):(clearInterval(r),o.textContent="00",n.textContent="00",t.textContent="00",document.querySelector(".timer-numbers").classList.remove("d-none"))}),0)})(),s=document.querySelector(".menu"),u=document.querySelector("menu"),d=function(){return u.classList.toggle("active-menu")},s.addEventListener("click",(function(e){e.stopPropagation(),d()})),document.addEventListener("click",(function(e){var t=e.target,n=t===u||u.contains(t),o=t===s,c=u.classList.contains("active-menu");n||o||!c||d(),(t=t.matches("menu a"))&&d()})),a=document.querySelectorAll(".popup-btn"),i=document.querySelector(".popup"),l=i.querySelector(".popup-content"),a.forEach((function(e){e.addEventListener("click",(function(){var e,t,n,o,c,r=window.innerWidth;r>768?(i.style.display="block",t=(e={duration:1e3,timing:function(e){return Math.pow(e,3)},draw:function(e){l.style.left=e*(r/2-l.offsetWidth/2+50)+"px"}}).timing,n=e.draw,o=e.duration,c=performance.now(),requestAnimationFrame((function e(r){var a=(r-c)/o;a>1&&(a=1);var i=t(a);n(i),a<1&&requestAnimationFrame(e)}))):i.style.display="block",document.body.classList.add("scroll--lock")}))})),i.addEventListener("click",(function(e){var t=e.target;!t.classList.contains("popup-close")&&t.closest(".popup-content")||(i.style.display="none",document.body.classList.remove("scroll--lock"))})),window.addEventListener("resize",(function(){l.removeAttribute("style")})),o=document.querySelector(".service-header"),c=o.querySelectorAll(".service-header-tab"),r=document.querySelectorAll(".service-tab"),o.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&c.forEach((function(e,n){e===t&&function(e){for(var t=0;t<r.length;t++)e===t?(c[t].classList.add("active"),r[t].classList.remove("d-none")):(c[t].classList.remove("active"),r[t].classList.add("d-none"))}(n)}))})),function(){for(var e,t,n=document.querySelector(".portfolio-content"),o=document.querySelectorAll(".portfolio-item"),c=(document.querySelectorAll(".portfolio-btn"),0),r=0;r<o.length;r++)(t=document.createElement("li")).classList.add("dot"),0===r&&t.classList.add("dot-active"),document.querySelector(".portfolio-dots").append(t);var a=document.querySelectorAll(".dot"),i=function(e,t,n){e[t].classList.add(n)},l=function(e,t,n){e[t].classList.remove(n)},s=function(){l(o,c,"portfolio-item-active"),l(a,c,"dot-active"),++c>=o.length&&(c=0),i(o,c,"portfolio-item-active"),i(a,c,"dot-active")},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;e=setInterval(s,t)};n.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(l(o,c,"portfolio-item-active"),l(a,c,"dot-active"),t.matches("#arrow-right")?c++:t.matches("#arrow-left")?c--:t.matches(".dot")&&a.forEach((function(e,n){e===t&&(c=n)})),c>=o.length&&(c=0),c<0&&(c=o.length-1),i(o,c,"portfolio-item-active"),i(a,c,"dot-active"))})),n.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(e)})),n.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&u()})),u(2e3)}(),document.querySelectorAll(".command__photo").forEach((function(e){var t;e.addEventListener("mouseenter",(function(e){t=e.target.src,e.target.src=e.target.dataset.img})),e.addEventListener("mouseleave",(function(e){e.target.src=t}))})),n=function(e,t){e.value=e.value.replace(t,"").trim(),function(e){e.value=e.value.replace(/-+/g,"-"),e.value=e.value.replace(/\s+/g," "),e.value=e.value.replace(/^-+/g,""),e.value=e.value.replace(/-+$/g,"")}(e)},document.querySelector("body").addEventListener("blur",(function(e){var t=e.target;if(t.matches("[name = 'user_name']")){n(t,/[^-а-яё\s]/gi);for(var o=t.value.split(" "),c=0;c<o.length;c++)o[c]=o[c].slice(0,1).toUpperCase()+o[c].slice(1).toLowerCase();o=o.join(" "),t.value=o}else t.matches("[name = 'user_message']")?n(t,/[^а-яё\s\d.,;:'"!?()-/]/gi):t.matches("[name = 'user_email']")?n(t,/[^a-z@_.!~*'-]/gi):t.matches("[name = 'user_phone']")?n(t,/[^\d+]/gi):(t.matches(".calc-square")||t.matches(".calc-count")||t.matches(".calc-day"))&&(t.value=t.value.replace(/\D/g,""))}),!0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),c=document.querySelector(".calc-count"),r=document.querySelector(".calc-day"),a=document.getElementById("total"),i=function(){var t=0,i=1,l=1,s=n.options[n.selectedIndex].value,u=+o.value;c.value>1&&(i+=(c.value-1)/10),r.value&&r.value<5?l*=2:r.value&&r.value<10&&(l*=1.5),s&&u&&(t=e*s*u*i*l),a.textContent=t};t.addEventListener("input",(function(e){var t=e.target;(t.matches(".calc-type")||t.matches(".calc-square")||t.matches(".calc-count")||t.matches(".calc-day"))&&i()}))}(),e=document.createElement("div"),t=function(e,t,n,o,c){var r=!0;return document.querySelectorAll("[name = ".concat(t,"]")).forEach((function(t){t.id.split("-")[0]===e.id&&(n.test(t.value)?r=!0:(e.appendChild(o),o.style.cssText="font-size: 20px; color: red",o.textContent=c,r=!1))})),!!r},document.addEventListener("submit",(function(n){var o=n.target;if(o.matches("form")){n.preventDefault();var c=t(o,"user_phone",/\+?\d{7,13}/g,e,"Полe phone может начинаться с '+' и должно содержать от 7 до 13 символов"),r=t(o,"user_email",/[^]/,e,"Полe email не должно быть пустым"),a=t(o,"user_name",/.{2,}/g,e,"Полe name должно содержать минимум 2 символа");if(c&&r&&a){e.style.cssText="font-size: 20px; color: white",o.appendChild(e);var i=new FormData(o);e.textContent="Загрузка...";var l={};i.forEach((function(e,t){l[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"aplication/json"},body:JSON.stringify(e)})}(l).then((function(t){if(200!==t.status)throw new Error("status network is not 200");e.textContent="Спасибо, наш менеджер с вами скоро свяжется!",setTimeout((function(){e.remove()}),2e3),setTimeout((function(){document.querySelector(".popup").style.display="none",document.querySelector("body").classList.remove("scroll--lock")}),3e3),o.reset()})).catch((function(t){e.textContent="Что-то пошло не так",console.error(t)}))}}}))})();